(defcomponent -zow (((ctr set-ctr) (use-state 0))) ()
  (psx
   (:div ()
         (:p () (+ "That's my number: " ctr)
             " "
             (:button ((on-click (lambda () (set-ctr (1+ ctr)))))
                      "Clickeroni")))))

(defcomponent -game (((ctr set-ctr) (use-state 0))) ()
  (psx
   (:div ((style (create
                  width "100vw"
                  height "100vh"
                  background-color "lightgreen")))
         (:h3 ((style (create margin 0))) "My cool component can ")

         (:div ()
               (:p () "Image size: " ctr)
               (loop for i from 0 to 100 by 10
                     collect
                     (fwrap i
                            (psx
                             (:div ()
                                   (:button ((on-click (lambda ()
                                                         (set-ctr (+ ctr i)))))
                                            "Add " i)))))
               (:div () "Set to 0"
                    (:button ((on-click (lambda () (set-ctr 0)))) "click")))
         (:-zow () nil))))

(let ((-app (psx (:-game ()))))
  ((@ preact render) -app (@ document body)))
